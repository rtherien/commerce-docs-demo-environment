<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail - Sports Store Demo</title>
    <link rel="stylesheet" href="../styles/main.css">
    <script type="module" src="https://static.cloud.coveo.com/atomic/v3/atomic.esm.js"></script>
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="header-content">
                <div class="logo">
                    <h1><a href="../../index.html">Sports Store Demo</a></h1>
                </div>
                <nav>
                    <a href="simple-search.html">Search</a> |
                    <a href="simple-plp-golf.html">Golf</a> |
                    <a href="simple-plp-hockey.html">Hockey</a> |
                    <a href="simple-plp-shoes.html">Shoes</a>
                </nav>
            </div>
        </header>

        <main class="main-content">
            <div class="product-detail-container">
                <h2>Product Detail Page</h2>
                <p>‚úÖ <strong>Click event was tracked successfully!</strong></p>
                
                <div class="click-confirmation">
                    <h3>What happened:</h3>
                    <ul>
                        <li>You clicked on a product link</li>
                        <li>Coveo Analytics recorded the click event</li>
                        <li>You were redirected to this product detail page</li>
                        <li>This simulates a real product page experience</li>
                    </ul>
                </div>

                <div class="product-info">
                    <h3>Product Information:</h3>
                    <p><strong>Product ID:</strong> <span id="product-id">Loading...</span></p>
                    <p><strong>Category:</strong> <span id="product-category">Loading...</span></p>
                    <p><strong>Source Page:</strong> <span id="source-page">Loading...</span></p>
                </div>

                <div class="actions">
                    <button onclick="history.back()" class="back-btn">‚Üê Go Back</button>
                    <button onclick="simulateAddToCart()" class="cart-btn">Add to Cart (Demo)</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Extract product information from URL
        function getProductInfoFromURL() {
            const url = window.location.pathname;
            const segments = url.split('/');
            
            // Find product ID (last segment)
            const productId = segments[segments.length - 1] || 'unknown';
            
            // Find category from URL path
            let category = 'general';
            if (url.includes('/golf/')) category = 'golf';
            else if (url.includes('/hockey/')) category = 'hockey';
            else if (url.includes('/shoes/')) category = 'shoes';
            else if (url.includes('/search/')) category = 'search';
            
            return { productId, category };
        }

        // Simulate add to cart action
        function simulateAddToCart() {
            const { productId, category } = getProductInfoFromURL();
            
            alert(`Demo: Added product ${productId} to cart!\n\nIn a real implementation, this would:\n- Update cart state\n- Send cart analytics event\n- Show cart confirmation`);
            
            console.log('üõí Simulated add to cart:', { productId, category });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            const { productId, category } = getProductInfoFromURL();
            
            document.getElementById('product-id').textContent = productId;
            document.getElementById('product-category').textContent = category;
            document.getElementById('source-page').textContent = document.referrer || 'Direct access';
            
            console.log('üìÑ Product detail page loaded:', { productId, category });
            console.log('üîç Referrer:', document.referrer);
        });
    </script>

    <style>
        .product-detail-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #28a745;
        }

        .click-confirmation {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .product-info {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .actions {
            margin-top: 2rem;
            text-align: center;
        }

        .back-btn, .cart-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            margin: 0 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }

        .back-btn:hover, .cart-btn:hover {
            background: #1e3d6f;
        }

        .cart-btn {
            background: var(--success-color);
        }

        .cart-btn:hover {
            background: #1e7e34;
        }
    </style>
</body>
</html>